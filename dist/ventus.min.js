/*!
 * Ventus 0.3
 * Copyright © 2015 Ramón Lamana
 * http://www.rlamana.com
 */
!function(t,e){"function"==typeof define&&define.amd?define(["$"],e):t.Ventus=e(t.$)}(this,function(t){var e,n,i;return function(t){function r(t,e){var n,i,r,s,o,a,u,c,l,h,f=e&&e.split("/"),d=m.map,p=d&&d["*"]||{};if(t&&"."===t.charAt(0)&&e){for(f=f.slice(0,f.length-1),t=f.concat(t.split("/")),c=0;h=t[c];c++)if("."===h)t.splice(c,1),c-=1;else if(".."===h){if(1===c&&(".."===t[2]||".."===t[0]))return!0;c>0&&(t.splice(c-1,2),c-=2)}t=t.join("/")}if((f||p)&&d){for(n=t.split("/"),c=n.length;c>0;c-=1){if(i=n.slice(0,c).join("/"),f)for(l=f.length;l>0;l-=1)if(r=d[f.slice(0,l).join("/")],r&&(r=r[i])){s=r,o=c;break}if(s)break;!a&&p&&p[i]&&(a=p[i],u=c)}!s&&a&&(s=a,o=u),s&&(n.splice(0,o,s),t=n.join("/"))}return t}function s(e,n){return function(){return f.apply(t,v.call(arguments,0).concat([e,n]))}}function o(t){return function(e){return r(e,t)}}function a(t){return function(e){d[t]=e}}function u(e){if(p.hasOwnProperty(e)){var n=p[e];delete p[e],g[e]=!0,h.apply(t,n)}if(!d.hasOwnProperty(e))throw new Error("No "+e);return d[e]}function c(t,e){var n,i,s=t.indexOf("!");return-1!==s?(n=r(t.slice(0,s),e),t=t.slice(s+1),i=u(n),t=i&&i.normalize?i.normalize(t,o(e)):r(t,e)):t=r(t,e),{f:n?n+"!"+t:t,n:t,p:i}}function l(t){return function(){return m&&m.config&&m.config[t]||{}}}var h,f,d={},p={},m={},g={},v=[].slice;h=function(e,n,i,r){var o,h,f,m,v,w,b=[];if(r=r||e,"function"==typeof i){for(n=!n.length&&i.length?["require","exports","module"]:n,w=0;w<n.length;w++)if(v=c(n[w],r),f=v.f,"require"===f)b[w]=s(e);else if("exports"===f)b[w]=d[e]={},o=!0;else if("module"===f)h=b[w]={id:e,uri:"",exports:d[e],config:l(e)};else if(d.hasOwnProperty(f)||p.hasOwnProperty(f))b[w]=u(f);else if(v.p)v.p.load(v.n,s(r,!0),a(f),{}),b[w]=d[f];else if(!g[f])throw new Error(e+" missing "+f);m=i.apply(d[e],b),e&&(h&&h.exports!==t&&h.exports!==d[e]?d[e]=h.exports:m===t&&o||(d[e]=m))}else e&&(d[e]=i)},e=n=f=function(e,n,i,r){return"string"==typeof e?u(c(e,n).f):(e.splice||(m=e,n.splice?(e=n,n=i,i=null):e=t),n=n||function(){},r?h(t,e,n,i):setTimeout(function(){h(t,e,n,i)},15),f)},f.config=function(t){return m=t,f},i=function(t,e,n){e.splice||(n=e,e=[]),p[t]=[t,e,n]},i.amd={jQuery:!0}}(),i("almond",[],function(){}),function(t,e){"function"==typeof i&&i.amd?i("handlebars",[],e):"object"==typeof exports?module.exports=e():t.Handlebars=t.Handlebars||e()}(this,function(){var t=function(){"use strict";function t(t){this.string=t}var e;return t.prototype.toString=function(){return""+this.string},e=t}(),e=function(t){"use strict";function e(t){return u[t]}function n(t){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&(t[n]=arguments[e][n]);return t}function i(t){return t instanceof a?t.toString():null==t?"":t?(t=""+t,l.test(t)?t.replace(c,e):t):t+""}function r(t){return t||0===t?d(t)&&0===t.length?!0:!1:!0}function s(t,e){return(t?t+".":"")+e}var o={},a=t,u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c=/[&<>"'`]/g,l=/[&<>"'`]/;o.extend=n;var h=Object.prototype.toString;o.toString=h;var f=function(t){return"function"==typeof t};f(/x/)&&(f=function(t){return"function"==typeof t&&"[object Function]"===h.call(t)});var f;o.isFunction=f;var d=Array.isArray||function(t){return t&&"object"==typeof t?"[object Array]"===h.call(t):!1};return o.isArray=d,o.escapeExpression=i,o.isEmpty=r,o.appendContextPath=s,o}(t),n=function(){"use strict";function t(t,e){var i;e&&e.firstLine&&(i=e.firstLine,t+=" - "+i+":"+e.firstColumn);for(var r=Error.prototype.constructor.call(this,t),s=0;s<n.length;s++)this[n[s]]=r[n[s]];i&&(this.lineNumber=i,this.column=e.firstColumn)}var e,n=["description","fileName","lineNumber","message","name","number","stack"];return t.prototype=new Error,e=t}(),i=function(t,e){"use strict";function n(t,e){this.helpers=t||{},this.partials=e||{},i(this)}function i(t){t.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new o("Missing helper: '"+arguments[arguments.length-1].name+"'")}),t.registerHelper("blockHelperMissing",function(e,n){var i=n.inverse,r=n.fn;if(e===!0)return r(this);if(e===!1||null==e)return i(this);if(l(e))return e.length>0?(n.ids&&(n.ids=[n.name]),t.helpers.each(e,n)):i(this);if(n.data&&n.ids){var o=g(n.data);o.contextPath=s.appendContextPath(n.data.contextPath,n.name),n={data:o}}return r(e,n)}),t.registerHelper("each",function(t,e){if(!e)throw new o("Must pass iterator to #each");var n,i,r=e.fn,a=e.inverse,u=0,c="";if(e.data&&e.ids&&(i=s.appendContextPath(e.data.contextPath,e.ids[0])+"."),h(t)&&(t=t.call(this)),e.data&&(n=g(e.data)),t&&"object"==typeof t)if(l(t))for(var f=t.length;f>u;u++)n&&(n.index=u,n.first=0===u,n.last=u===t.length-1,i&&(n.contextPath=i+u)),c+=r(t[u],{data:n});else for(var d in t)t.hasOwnProperty(d)&&(n&&(n.key=d,n.index=u,n.first=0===u,i&&(n.contextPath=i+d)),c+=r(t[d],{data:n}),u++);return 0===u&&(c=a(this)),c}),t.registerHelper("if",function(t,e){return h(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||s.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers["if"].call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),t.registerHelper("with",function(t,e){h(t)&&(t=t.call(this));var n=e.fn;if(s.isEmpty(t))return e.inverse(this);if(e.data&&e.ids){var i=g(e.data);i.contextPath=s.appendContextPath(e.data.contextPath,e.ids[0]),e={data:i}}return n(t,e)}),t.registerHelper("log",function(e,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;t.log(i,e)}),t.registerHelper("lookup",function(t,e){return t&&t[e]})}var r={},s=t,o=e,a="2.0.0";r.VERSION=a;var u=6;r.COMPILER_REVISION=u;var c={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};r.REVISION_CHANGES=c;var l=s.isArray,h=s.isFunction,f=s.toString,d="[object Object]";r.HandlebarsEnvironment=n,n.prototype={constructor:n,logger:p,log:m,registerHelper:function(t,e){if(f.call(t)===d){if(e)throw new o("Arg not supported with multiple helpers");s.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){f.call(t)===d?s.extend(this.partials,t):this.partials[t]=e},unregisterPartial:function(t){delete this.partials[t]}};var p={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(t,e){if(p.level<=t){var n=p.methodMap[t];"undefined"!=typeof console&&console[n]&&console[n].call(console,e)}}};r.logger=p;var m=p.log;r.log=m;var g=function(t){var e=s.extend({},t);return e._parent=t,e};return r.createFrame=g,r}(e,n),r=function(t,e,n){"use strict";function i(t){var e=t&&t[0]||1,n=f;if(e!==n){if(n>e){var i=d[n],r=d[e];throw new h("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+r+").")}throw new h("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function r(t,e){if(!e)throw new h("No environment passed to template");if(!t||!t.main)throw new h("Unknown template object: "+typeof t);e.VM.checkRevision(t.compiler);var n=function(n,i,r,s,o,a,u,c,f){o&&(s=l.extend({},s,o));var d=e.VM.invokePartial.call(this,n,r,s,a,u,c,f);if(null==d&&e.compile){var p={helpers:a,partials:u,data:c,depths:f};u[r]=e.compile(n,{data:void 0!==c,compat:t.compat},e),d=u[r](s,p)}if(null!=d){if(i){for(var m=d.split("\n"),g=0,v=m.length;v>g&&(m[g]||g+1!==v);g++)m[g]=i+m[g];d=m.join("\n")}return d}throw new h("The partial "+r+" could not be compiled when running in runtime-only mode")},i={lookup:function(t,e){for(var n=t.length,i=0;n>i;i++)if(t[i]&&null!=t[i][e])return t[i][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:l.escapeExpression,invokePartial:n,fn:function(e){return t[e]},programs:[],program:function(t,e,n){var i=this.programs[t],r=this.fn(t);return e||n?i=s(this,t,r,e,n):i||(i=this.programs[t]=s(this,t,r)),i},data:function(t,e){for(;t&&e--;)t=t._parent;return t},merge:function(t,e){var n=t||e;return t&&e&&t!==e&&(n=l.extend({},e,t)),n},noop:e.VM.noop,compilerInfo:t.compiler},r=function(e,n){n=n||{};var s=n.data;r._setup(n),!n.partial&&t.useData&&(s=u(e,s));var o;return t.useDepths&&(o=n.depths?[e].concat(n.depths):[e]),t.main.call(i,e,i.helpers,i.partials,s,o)};return r.isTop=!0,r._setup=function(n){n.partial?(i.helpers=n.helpers,i.partials=n.partials):(i.helpers=i.merge(n.helpers,e.helpers),t.usePartial&&(i.partials=i.merge(n.partials,e.partials)))},r._child=function(e,n,r){if(t.useDepths&&!r)throw new h("must pass parent depths");return s(i,e,t[e],n,r)},r}function s(t,e,n,i,r){var s=function(e,s){return s=s||{},n.call(t,e,t.helpers,t.partials,s.data||i,r&&[e].concat(r))};return s.program=e,s.depth=r?r.length:0,s}function o(t,e,n,i,r,s,o){var a={partial:!0,helpers:i,partials:r,data:s,depths:o};if(void 0===t)throw new h("The partial "+e+" could not be found");return t instanceof Function?t(n,a):void 0}function a(){return""}function u(t,e){return e&&"root"in e||(e=e?p(e):{},e.root=t),e}var c={},l=t,h=e,f=n.COMPILER_REVISION,d=n.REVISION_CHANGES,p=n.createFrame;return c.checkRevision=i,c.template=r,c.program=s,c.invokePartial=o,c.noop=a,c}(e,n,i),s=function(t,e,n,i,r){"use strict";var s,o=t,a=e,u=n,c=i,l=r,h=function(){var t=new o.HandlebarsEnvironment;return c.extend(t,o),t.SafeString=a,t.Exception=u,t.Utils=c,t.escapeExpression=c.escapeExpression,t.VM=l,t.template=function(e){return l.template(e,t)},t},f=h();return f.create=h,f["default"]=f,s=f}(i,t,n,e,r);return s}),i("ventus/core/emitter",[],function(){"use strict";function t(t,e,n){return function(i){return(i.funct===t&&i.scope===e)===n}}function e(e,n,i,r){return e[n]?e[n].some(t(i,r,!0)):!1}function n(){this._listeners={}}return n.prototype={listenersCount:function(t){var e=this._listeners[t];return e?e.length:0},on:function(t,n,i){var r=this._listeners;e(r,t,n,i)||(r[t]||(r[t]=[]),r[t].push({funct:n,scope:i}))},off:function(e,n,i){var r=this._listeners[e];r&&(this._listeners[e]=r.filter(t(n,i,!1)))},once:function(t,n,i){e(this._listeners,t,n,i)||this.on(t,function r(){this.off(t,r,this),n.apply(i,arguments)},this)},emit:function(t){var e=this._listeners[t];if(e){var n=Array.prototype.slice.call(arguments,1);e.forEach(function(t){t.funct.apply(t.scope,n)})}},connect:function(t,e){if(t)for(var n in t)t.hasOwnProperty(n)&&this.on(n,t[n],e)},disconnect:function(t,e){if(t)for(var n in t)t.hasOwnProperty(n)&&this.off(n,t[n],e)}},n}),i("ventus/core/promise",[],function(){"use strict";function t(t,e,n){setTimeout(function(){t.apply(e,n)})}function e(t,e,n){var i="Error on "+t+" promise execution at index ["+n+"]";Error.call(this,i),this.child=e,this.index=n,this.message=i}function n(){this._future=new s}function i(t){return t.hasSucceed()}function r(t,n,i,o,a){return i+=1,i>=t.length?o.done(a):a instanceof s?void a.then(function(){r(t,n,i,o,t[i].apply(n,arguments))},function(t){o.fail(new e(" serial ",t,i))}):r(t,n,i,o,t[i].call(n,a))}function s(){this._args=null,this._fn={success:[],failed:[],"finally":[]}}var o=Array.prototype.slice;return n.prototype={constructor:n,done:function(){var t=o.call(arguments);this.getFuture()._arrived("success",t)},fail:function(){var t=o.call(arguments);this.getFuture()._arrived("failed",t)},getFuture:function(){return this._future}},n.done=function(){var t=new n;return t.done.apply(t,arguments),t.getFuture()},n.failed=function(){var t=new n;return t.fail.apply(t,arguments),t.getFuture()},n.parallel=function(){return n.all(o.call(arguments))},n.all=function(t){if(!t||!t.length)return n.done();t=t.map(function(t){return t.getFuture?t.getFuture():t});var r=new n,s=[];return t.forEach(function(n,a){n.then(function(){s[a]=o.call(arguments),t.every(i)&&r.done.apply(r,s)},function(t){r.fail(new e("parallel",t,a))})}),r.getFuture()},n.serial=function(t,e){if(!t||0===t.length)return n.done();var i=new n;return setTimeout(function(){r(t,e,0,i,t[0].call(e))}),i.getFuture()},s.prototype={constructor:s,_add:function(e,n,i){return n?this._fn[e]===!0?t(n,i,this._args):this._fn[e]&&this._fn[e].push({callback:n,scope:i}):console.warn("No callback passed"),this},_arrived:function(t,e){function n(t){t.callback.apply(t.scope,e)}if(this.isCompleted())throw new Error("Future already arrived!");var i=this._fn[t].concat(this._fn["finally"]);this._fn={success:!1,failed:!1,"finally":!0},this._args=e,this._fn[t]=!0,i.forEach(n)},isCompleted:function(){return this._fn["finally"]===!0},hasFailed:function(){return this._fn.failed===!0},hasSucceed:function(){return this._fn.success===!0},onDone:function(t,e){return this._add("success",t,e)},onError:function(t,e){return this._add("failed",t,e)},onFinally:function(t,e){return this._add("finally",t,e)},then:function(t,e,n){t&&this.onDone(t),e&&this.onError(e),n&&this.onFinally(n)},transform:function(t){var e=new n;return this.then(function(){var n=t.apply(null,arguments);n&&"array"===n.constructor||(n=[n]),e.done.apply(e,n)},function(){e.fail.apply(e,arguments)}),e.getFuture()}},n.PromiseError=e,n.Future=s,n}),i("ventus/core/view",["$"],function(t){"use strict";for(var e=/^(?:(.*)\s)?(\w+)$/,n="transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",i="animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",r=["transform","transition","animation","transform-origin"],s=r.length;s--;)!function(e){t.cssHooks[e]={get:function(){return null},set:function(t,n){t.style["-webkit-"+e]=n,t.style["-moz-"+e]=n,t.style["-ms-"+e]=n,t.style["-o-"+e]=n,t.style[e]=n}}}(r[s]);return t.fn.extend({listen:function(t,n){var i,r,s,o;for(var a in t)if(t.hasOwnProperty(a)){if(i=t[a],r=a.match(e),s=r[1],o=r[2],"mousedown"===o?o+=" touchstart":"mousemove"===o?o+=" touchmove":"mouseup"===o?o+=" touchend":"click"===o&&(o+=" touchend"),"string"==typeof i&&(i=n[i]),!i)throw new Error("Handler not found");s?this.on(o,s,i.bind(n)):this.on(o,i.bind(n))}return this},onTransitionEnd:function(t,e){this.one(n,function(){t.apply(e||this)})},onAnimationEnd:function(t,e){this.one(i,function(){t.apply(e||this)})}}),function(e){return"function"==typeof e?function(n){return t(e(n||{}))}:t(e)}}),i("ventus/tpl/window",["handlebars"],function(t){return t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var r,s="function",o=e.helperMissing,a=this.escapeExpression;return'<div class="wm-window '+a((r=null!=(r=e.classname||(null!=t?t.classname:t))?r:o,typeof r===s?r.call(t,{name:"classname",hash:{},data:i}):r))+'">\n	<div class="wm-window-box">\n		<header class="wm-window-title" unselectable="on">\n			<h1 unselectable="on">'+a((r=null!=(r=e.title||(null!=t?t.title:t))?r:o,typeof r===s?r.call(t,{name:"title",hash:{},data:i}):r))+'</h1>\n			<div class="wm-button-group">\n				<button class="wm-minimize">&nbsp;</button>\n				<button class="wm-maximize">&nbsp;</button>\n				<button class="wm-close">&nbsp;</button>\n			</div>\n		</header>\n\n		<section class="wm-content"></section>\n\n		<button class="wm-resize">&nbsp;</button>\n	</div>\n	<div class="wm-window-overlay"></div>\n</div>\n'},useData:!0})}),i("ventus/wm/window",["ventus/core/emitter","ventus/core/promise","ventus/core/view","ventus/tpl/window"],function(t,e,n,i){"use strict";function r(t){return!!window.TouchEvent&&t.originalEvent instanceof window.TouchEvent}function s(t){return r(t)?t.originalEvent.changedTouches[0]:t.originalEvent}var o=function(e){if(this.signals=new t,e=e||{title:"Untitle Window",width:400,height:200,x:0,y:0,content:"",movable:!0,resizable:!0,widget:!1,titlebar:!0,animations:!0,classname:"",stayinspace:!1},e.animations&&e.classname+" animated",this.el=n(i({title:e.title,classname:e.classname})),this.el.listen(this.events.window,this),e.opacity&&this.el.css("opacity",e.opacity),e.events)for(var r in e.events)e.events.hasOwnProperty(r)&&"function"==typeof e.events[r]&&this.signals.on(r,e.events[r],this);this.$content=this.el.find(".wm-content"),e.content&&this.$content.append(e.content),this.$titlebar=this.el.find("header"),this.width=e.width||400,this.height=e.height||200,this.x=e.x||0,this.y=e.y||0,this.z=1e4,this.enabled=!0,this.active=!1,this.maximized=!1,this.minimized=!1,this._closed=!0,this._destroyed=!1,this.widget=!1,this.movable="undefined"!=typeof e.movable?e.movable:!0,this.resizable="undefined"!=typeof e.resizable?e.resizable:!0,this.animations="undefined"!=typeof e.animations?e.animations:!0,this.titlebar=!0,this.stayinspace="undefined"!=typeof e.stayinspace?e.stayinspace:!1};return o.prototype={_restore:null,_moving:null,_resizing:null,_mouseEdgePosition:null,slots:{move:function(t){var e=s(t);this.enabled&&this.movable&&(this._moving=this.toLocal({x:e.pageX,y:e.pageY}),this.el.addClass("move"),this._space[0].classList.add("no-events"),t.preventDefault())}},events:{window:{click:function(t){this.signals.emit("select",this,t)},mousedown:function(t){this.focus(),this.widget&&this.slots.move.call(this,t),this.enabled&&this.resizable&&!this.maximized&&this.mouseOnWindowEdge&&this.startResize(t)},".wm-content click":function(t){this.enabled&&this.signals.emit("click",this,t)},".wm-window-title mousedown":function(t){this.maximized||this.mouseOnWindowEdge||this.slots.move.call(this,t)},".wm-window-title dblclick":function(){this.enabled&&this.resizable&&this.maximize()},".wm-window-title button.wm-close click":function(t){t.stopPropagation(),t.preventDefault(),this.enabled&&this.close()},".wm-window-title button.wm-maximize click":function(t){t.stopPropagation(),t.preventDefault(),this.enabled&&this.resizable&&this.maximize()},".wm-window-title button.wm-minimize click":function(t){t.stopPropagation(),t.preventDefault(),this.enabled&&this.minimize()},".wm-window-title button mousedown":function(t){this.focus(),t.stopPropagation(),t.preventDefault()},"button.wm-resize mousedown":function(t){this.enabled&&this.resizable&&(this._mouseEdgePosition={top:!1,left:!1,bottom:!0,right:!0},this.startResize(t))},mousemove:function(t){var e={TOP:5,LEFT:15,BOTTOM:15,RIGHT:15},n=36;if(this.enabled&&this.resizable&&!this._resizing){var i=s(t);if(this._mouseEdgePosition={top:!t.srcElement.classList.contains("wm-content")&&i.offsetY<e.TOP,left:i.offsetX<e.LEFT,bottom:this.height-n-i.offsetY<e.BOTTOM,right:this.width-i.offsetX<e.RIGHT},this.el[0].classList.remove("mouse-edge","mouse-edge-top","mouse-edge-top-left","mouse-edge-top-right","mouse-edge-left","mouse-edge-right","mouse-edge-bottom","mouse-edge-bottom-left","mouse-edge-bottom-right"),this.mouseOnWindowEdge){var r="mouse-edge";this._mouseEdgePosition.top?r+="-top":this._mouseEdgePosition.bottom&&(r+="-bottom"),this._mouseEdgePosition.left?r+="-left":this._mouseEdgePosition.right&&(r+="-right"),this.el[0].classList.add("mouse-edge",r)}}},mouseleave:function(){this._resizing||(this._mouseEdgePosition=null,this.el[0].classList.remove("mouse-edge","mouse-edge-top","mouse-edge-top-left","mouse-edge-top-right","mouse-edge-left","mouse-edge-right","mouse-edge-bottom","mouse-edge-bottom-left","mouse-edge-bottom-right"))}},space:{mousemove:function(t){var e=s(t);if(r(t)||1===t.which||(this._moving&&this._stopMove(),this._resizing&&this._stopResize()),this._moving)if(this.stayinspace){(this.el[0].clientWidth>this.space[0].clientWidth||this.el[0].clientHeight>this.space[0].clientHeight)&&this.resize(Math.min(this.el[0].clientWidth,this.space[0].clientWidth),Math.min(this.el[0].clientHeight,this.space[0].clientHeight));var n=Math.max(0,e.pageX-this._moving.x),i=0,o=Math.max(0,e.pageY-this._moving.y),a=0;n+this.el[0].clientWidth>this.space[0].clientWidth&&(i=n+this.el[0].clientWidth-this.space[0].clientWidth),o+this.el[0].clientHeight>this.space[0].clientHeight&&(a=o+this.el[0].clientHeight-this.space[0].clientHeight),this.move(n-i,o-a)}else this.move(e.pageX-this._moving.x,e.pageY-this._moving.y);if(this._resizing){var u;u=this.resizingHorizontally?this._mouseEdgePosition.left?this._resizing.pageX-e.pageX+this._resizing.width:e.pageX-this._resizing.pageX+this._resizing.width:this.width;var c;c=this.resizingVertically?this._mouseEdgePosition.top?this._resizing.pageY-e.pageY+this._resizing.height:e.pageY-this._resizing.pageY+this._resizing.height:this.height,this.resize(u,c),this._mouseEdgePosition.left&&this.move(e.pageX,this.y),this._mouseEdgePosition.top&&this.move(this.x,e.pageY)}},mouseup:function(){this._moving&&this._stopMove(),this._resizing&&this._stopResize()}}},_stopMove:function(){this.el.removeClass("move"),this._space[0].classList.remove("no-events"),this._moving=null},_stopResize:function(){this._space[0].classList.remove("no-events"),this.el.removeClass("resizing"),this._restore=null,this._resizing=null},get mouseOnWindowEdge(){return this._mouseEdgePosition&&(this._mouseEdgePosition.top||this._mouseEdgePosition.left||this._mouseEdgePosition.bottom||this._mouseEdgePosition.right)},get resizingHorizontally(){return this._mouseEdgePosition&&(this._mouseEdgePosition.left||this._mouseEdgePosition.right)},get resizingVertically(){return this._mouseEdgePosition&&(this._mouseEdgePosition.top||this._mouseEdgePosition.bottom)},set space(t){return t&&!t.listen?void console.error("The given space element is not a valid View"):(this._space=t,t.append(this.el),void t.listen(this.events.space,this))},get space(){return this._space},get maximized(){return this._maximized},set maximized(t){t?(this._restoreMaximized=this.stamp(),this.el.addClass("maximized"),this.signals.emit("maximize",this,this._restoreMaximized)):(this.el.removeClass("maximized"),this.signals.emit("restore",this,this._restoreMaximized)),this._maximized=t},get minimized(){return this._minimized},set minimized(t){t?(this._restoreMinimized=this.stamp(),this.signals.emit("minimize",this,this._restoreMinimized)):this.signals.emit("restore",this,this._restoreMinimized),this._minimized=t},set active(t){t?(this.signals.emit("focus",this),this.el.addClass("active"),this.el.removeClass("inactive")):(this.signals.emit("blur",this),this.el.removeClass("active"),this.el.addClass("inactive")),this._active=t},get active(){return this._active},set enabled(t){t?this.el.removeClass("disabled"):this.el.addClass("disabled"),this._enabled=t},get enabled(){return this._enabled},set movable(t){this._movable=!!t},get movable(){return this._movable},set resizable(t){t?this.el.removeClass("noresizable"):this.el.addClass("noresizable"),this._resizable=!!t},get resizable(){return this._resizable},set closed(t){},get closed(){return this._closed},set destroyed(t){},get destroyed(){return this._destroyed},set widget(t){this._widget=t},get widget(){return this._widget},set titlebar(t){t?this.$titlebar.removeClass("hide"):this.$titlebar.addClass("hide"),this._titlebar=t},get titlebar(){return this._titlebar},set animations(t){t?this.el.addClass("animated"):this.el.removeClass("animated"),this._animations=t},get animations(){return this._animations},set width(t){this.el.width(t)},get width(){return parseInt(this.el.width(),10)},set height(t){this.el.height(t)},get height(){return parseInt(this.el.height(),10)},set x(t){this.el.css("left",t)},set y(t){this.el.css("top",t)},get x(){return parseInt(this.el.css("left"),10)},get y(){return parseInt(this.el.css("top"),10)},set z(t){this.el.css("z-index",t)},get z(){return parseInt(this.el.css("z-index"),10)},startResize:function(t){var e=s(t);this._resizing={pageX:e.pageX,pageY:e.pageY,width:this.width,height:this.height},this._space[0].classList.add("no-events"),this.el.addClass("resizing"),t.preventDefault()},open:function(){var t=new e;return this.signals.emit("open",this),this.el.show(),this.el.addClass("opening"),this.el.onAnimationEnd(function(){this.el.removeClass("opening"),t.done()},this),this._closed=!1,t},close:function(){var t=new e;return this.signals.emit("close",this),this.el.addClass("closing"),this.el.onAnimationEnd(function(){this.el.removeClass("closing"),this.el.addClass("closed"),this.el.hide(),this.signals.emit("closed",this),t.done()},this),this._closed=!0,t},destroy:function(){var t=function(){this.$content.html(""),this.signals.emit("destroyed",this),this._destroyed=!0}.bind(this);this.signals.emit("destroy",this),this.closed?t():this.close().getFuture().then(function(){t()})},resize:function(t,e){return this.width=t,this.height=e,this},move:function(t,e){return this.x=t,this.y=e,this},stamp:function(){return this.restore=function(){var t={width:this.width,height:this.height},e={x:this.x,y:this.y};return function(){return this.resize(t.width,t.height),this.move(e.x,e.y),this}}.apply(this),this.restore},restore:function(){},maximize:function(){this.el.addClass("maximazing");var t=function(){this.el.removeClass("maximazing")};return this.animations?this.el.onTransitionEnd(t,this):t.call(this),this.maximized=!this.maximized,this},minimize:function(){this.el.addClass("minimizing");var t=function(){this.el.removeClass("minimizing")};return this.animations?this.el.onTransitionEnd(t,this):t.call(this),this.minimized=!this.minimized,this},focus:function(){return this.active=!0,this},blur:function(){return this.active=!1,this},toLocal:function(t){return{x:t.x-this.x,y:t.y-this.y}},toGlobal:function(t){return{x:t.x+this.x,y:t.y+this.y}},append:function(t){t.appendTo(this.$content)}},o}),i("ventus/wm/modes/default",[],function(){"use strict";var t={register:function(){console.log("Default mode registered.")},plug:function(){},unplug:function(){},actions:{maximize:function(t){t.move(0,0),t.el.css("-webkit-transform","translate3d(0, 0, 0);"),t.resize(this.el.width(),this.el.height())},restore:function(t,e){e.call(t)},minimize:function(t){t.resize(0,0)}}};return t}),function(){var t=this,e=t._,n={},i=Array.prototype,r=Object.prototype,s=Function.prototype,o=i.push,a=i.slice,u=i.concat,c=r.toString,l=r.hasOwnProperty,h=i.forEach,f=i.map,d=i.reduce,p=i.reduceRight,m=i.filter,g=i.every,v=i.some,w=i.indexOf,b=i.lastIndexOf,y=Array.isArray,_=Object.keys,x=s.bind,j=function(t){return t instanceof j?t:this instanceof j?void(this._wrapped=t):new j(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=j),exports._=j):t._=j,j.VERSION="1.4.4";var E=j.each=j.forEach=function(t,e,i){if(null!=t)if(h&&t.forEach===h)t.forEach(e,i);else if(t.length===+t.length){for(var r=0,s=t.length;s>r;r++)if(e.call(i,t[r],r,t)===n)return}else for(var o in t)if(j.has(t,o)&&e.call(i,t[o],o,t)===n)return};j.map=j.collect=function(t,e,n){var i=[];return null==t?i:f&&t.map===f?t.map(e,n):(E(t,function(t,r,s){i[i.length]=e.call(n,t,r,s)}),i)};var z="Reduce of empty array with no initial value";j.reduce=j.foldl=j.inject=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),d&&t.reduce===d)return i&&(e=j.bind(e,i)),r?t.reduce(e,n):t.reduce(e);if(E(t,function(t,s,o){r?n=e.call(i,n,t,s,o):(n=t,r=!0)}),!r)throw new TypeError(z);return n},j.reduceRight=j.foldr=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),p&&t.reduceRight===p)return i&&(e=j.bind(e,i)),r?t.reduceRight(e,n):t.reduceRight(e);var s=t.length;if(s!==+s){var o=j.keys(t);s=o.length}if(E(t,function(a,u,c){u=o?o[--s]:--s,r?n=e.call(i,n,t[u],u,c):(n=t[u],r=!0)}),!r)throw new TypeError(z);return n},j.find=j.detect=function(t,e,n){var i;return O(t,function(t,r,s){return e.call(n,t,r,s)?(i=t,!0):void 0}),i},j.filter=j.select=function(t,e,n){var i=[];return null==t?i:m&&t.filter===m?t.filter(e,n):(E(t,function(t,r,s){e.call(n,t,r,s)&&(i[i.length]=t)}),i)},j.reject=function(t,e,n){return j.filter(t,function(t,i,r){return!e.call(n,t,i,r)},n)},j.every=j.all=function(t,e,i){e||(e=j.identity);var r=!0;return null==t?r:g&&t.every===g?t.every(e,i):(E(t,function(t,s,o){return(r=r&&e.call(i,t,s,o))?void 0:n}),!!r)};var O=j.some=j.any=function(t,e,i){e||(e=j.identity);var r=!1;return null==t?r:v&&t.some===v?t.some(e,i):(E(t,function(t,s,o){return r||(r=e.call(i,t,s,o))?n:void 0}),!!r)};j.contains=j.include=function(t,e){return null==t?!1:w&&t.indexOf===w?-1!=t.indexOf(e):O(t,function(t){return t===e})},j.invoke=function(t,e){var n=a.call(arguments,2),i=j.isFunction(e);return j.map(t,function(t){return(i?e:t[e]).apply(t,n)})},j.pluck=function(t,e){return j.map(t,function(t){return t[e]})},j.where=function(t,e,n){return j.isEmpty(e)?n?null:[]:j[n?"find":"filter"](t,function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0})},j.findWhere=function(t,e){return j.where(t,e,!0)},j.max=function(t,e,n){if(!e&&j.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.max.apply(Math,t);if(!e&&j.isEmpty(t))return-1/0;var i={computed:-1/0,value:-1/0};return E(t,function(t,r,s){var o=e?e.call(n,t,r,s):t;o>=i.computed&&(i={value:t,computed:o})}),i.value},j.min=function(t,e,n){if(!e&&j.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.min.apply(Math,t);if(!e&&j.isEmpty(t))return 1/0;var i={computed:1/0,value:1/0};return E(t,function(t,r,s){var o=e?e.call(n,t,r,s):t;i.computed>o&&(i={value:t,computed:o})}),i.value},j.shuffle=function(t){var e,n=0,i=[];return E(t,function(t){e=j.random(n++),i[n-1]=i[e],i[e]=t}),i};var P=function(t){return j.isFunction(t)?t:function(e){return e[t]}};j.sortBy=function(t,e,n){var i=P(e);return j.pluck(j.map(t,function(t,e,r){return{value:t,index:e,criteria:i.call(n,t,e,r)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index<e.index?-1:1}),"value")};var C=function(t,e,n,i){var r={},s=P(e||j.identity);return E(t,function(e,o){var a=s.call(n,e,o,t);i(r,a,e)}),r};j.groupBy=function(t,e,n){return C(t,e,n,function(t,e,n){(j.has(t,e)?t[e]:t[e]=[]).push(n)})},j.countBy=function(t,e,n){return C(t,e,n,function(t,e){j.has(t,e)||(t[e]=0),t[e]++})},j.sortedIndex=function(t,e,n,i){n=null==n?j.identity:P(n);for(var r=n.call(i,e),s=0,o=t.length;o>s;){var a=s+o>>>1;r>n.call(i,t[a])?s=a+1:o=a}return s},j.toArray=function(t){return t?j.isArray(t)?a.call(t):t.length===+t.length?j.map(t,j.identity):j.values(t):[]},j.size=function(t){return null==t?0:t.length===+t.length?t.length:j.keys(t).length},j.first=j.head=j.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:a.call(t,0,e)},j.initial=function(t,e,n){return a.call(t,0,t.length-(null==e||n?1:e))},j.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},j.rest=j.tail=j.drop=function(t,e,n){return a.call(t,null==e||n?1:e)},j.compact=function(t){return j.filter(t,j.identity)};var k=function(t,e,n){return E(t,function(t){j.isArray(t)?e?o.apply(n,t):k(t,e,n):n.push(t)}),n};j.flatten=function(t,e){return k(t,e,[])},j.without=function(t){return j.difference(t,a.call(arguments,1))},j.uniq=j.unique=function(t,e,n,i){j.isFunction(e)&&(i=n,n=e,e=!1);var r=n?j.map(t,n,i):t,s=[],o=[];return E(r,function(n,i){(e?i&&o[o.length-1]===n:j.contains(o,n))||(o.push(n),s.push(t[i]))}),s},j.union=function(){return j.uniq(u.apply(i,arguments))},j.intersection=function(t){var e=a.call(arguments,1);return j.filter(j.uniq(t),function(t){return j.every(e,function(e){return j.indexOf(e,t)>=0})})},j.difference=function(t){var e=u.apply(i,a.call(arguments,1));return j.filter(t,function(t){return!j.contains(e,t)})},j.zip=function(){for(var t=a.call(arguments),e=j.max(j.pluck(t,"length")),n=Array(e),i=0;e>i;i++)n[i]=j.pluck(t,""+i);return n},j.object=function(t,e){if(null==t)return{};for(var n={},i=0,r=t.length;r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},j.indexOf=function(t,e,n){if(null==t)return-1;var i=0,r=t.length;if(n){if("number"!=typeof n)return i=j.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,r+n):n}if(w&&t.indexOf===w)return t.indexOf(e,n);for(;r>i;i++)if(t[i]===e)return i;return-1},j.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(b&&t.lastIndexOf===b)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var r=i?n:t.length;r--;)if(t[r]===e)return r;return-1},j.range=function(t,e,n){1>=arguments.length&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=0,s=Array(i);i>r;)s[r++]=t,t+=n;return s},j.bind=function(t,e){if(t.bind===x&&x)return x.apply(t,a.call(arguments,1));
var n=a.call(arguments,2);return function(){return t.apply(e,n.concat(a.call(arguments)))}},j.partial=function(t){var e=a.call(arguments,1);return function(){return t.apply(this,e.concat(a.call(arguments)))}},j.bindAll=function(t){var e=a.call(arguments,1);return 0===e.length&&(e=j.functions(t)),E(e,function(e){t[e]=j.bind(t[e],t)}),t},j.memoize=function(t,e){var n={};return e||(e=j.identity),function(){var i=e.apply(this,arguments);return j.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},j.delay=function(t,e){var n=a.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},j.defer=function(t){return j.delay.apply(j,[t,1].concat(a.call(arguments,1)))},j.throttle=function(t,e){var n,i,r,s,o=0,a=function(){o=new Date,r=null,s=t.apply(n,i)};return function(){var u=new Date,c=e-(u-o);return n=this,i=arguments,0>=c?(clearTimeout(r),r=null,o=u,s=t.apply(n,i)):r||(r=setTimeout(a,c)),s}},j.debounce=function(t,e,n){var i,r;return function(){var s=this,o=arguments,a=function(){i=null,n||(r=t.apply(s,o))},u=n&&!i;return clearTimeout(i),i=setTimeout(a,e),u&&(r=t.apply(s,o)),r}},j.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},j.wrap=function(t,e){return function(){var n=[t];return o.apply(n,arguments),e.apply(this,n)}},j.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},j.after=function(t,e){return 0>=t?e():function(){return 1>--t?e.apply(this,arguments):void 0}},j.keys=_||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)j.has(t,n)&&(e[e.length]=n);return e},j.values=function(t){var e=[];for(var n in t)j.has(t,n)&&e.push(t[n]);return e},j.pairs=function(t){var e=[];for(var n in t)j.has(t,n)&&e.push([n,t[n]]);return e},j.invert=function(t){var e={};for(var n in t)j.has(t,n)&&(e[t[n]]=n);return e},j.functions=j.methods=function(t){var e=[];for(var n in t)j.isFunction(t[n])&&e.push(n);return e.sort()},j.extend=function(t){return E(a.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},j.pick=function(t){var e={},n=u.apply(i,a.call(arguments,1));return E(n,function(n){n in t&&(e[n]=t[n])}),e},j.omit=function(t){var e={},n=u.apply(i,a.call(arguments,1));for(var r in t)j.contains(n,r)||(e[r]=t[r]);return e},j.defaults=function(t){return E(a.call(arguments,1),function(e){if(e)for(var n in e)null==t[n]&&(t[n]=e[n])}),t},j.clone=function(t){return j.isObject(t)?j.isArray(t)?t.slice():j.extend({},t):t},j.tap=function(t,e){return e(t),t};var M=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof j&&(t=t._wrapped),e instanceof j&&(e=e._wrapped);var r=c.call(t);if(r!=c.call(e))return!1;switch(r){case"[object String]":return t==e+"";case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var s=n.length;s--;)if(n[s]==t)return i[s]==e;n.push(t),i.push(e);var o=0,a=!0;if("[object Array]"==r){if(o=t.length,a=o==e.length)for(;o--&&(a=M(t[o],e[o],n,i)););}else{var u=t.constructor,l=e.constructor;if(u!==l&&!(j.isFunction(u)&&u instanceof u&&j.isFunction(l)&&l instanceof l))return!1;for(var h in t)if(j.has(t,h)&&(o++,!(a=j.has(e,h)&&M(t[h],e[h],n,i))))break;if(a){for(h in e)if(j.has(e,h)&&!o--)break;a=!o}}return n.pop(),i.pop(),a};j.isEqual=function(t,e){return M(t,e,[],[])},j.isEmpty=function(t){if(null==t)return!0;if(j.isArray(t)||j.isString(t))return 0===t.length;for(var e in t)if(j.has(t,e))return!1;return!0},j.isElement=function(t){return!(!t||1!==t.nodeType)},j.isArray=y||function(t){return"[object Array]"==c.call(t)},j.isObject=function(t){return t===Object(t)},E(["Arguments","Function","String","Number","Date","RegExp"],function(t){j["is"+t]=function(e){return c.call(e)=="[object "+t+"]"}}),j.isArguments(arguments)||(j.isArguments=function(t){return!(!t||!j.has(t,"callee"))}),"function"!=typeof/./&&(j.isFunction=function(t){return"function"==typeof t}),j.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},j.isNaN=function(t){return j.isNumber(t)&&t!=+t},j.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==c.call(t)},j.isNull=function(t){return null===t},j.isUndefined=function(t){return void 0===t},j.has=function(t,e){return l.call(t,e)},j.noConflict=function(){return t._=e,this},j.identity=function(t){return t},j.times=function(t,e,n){for(var i=Array(t),r=0;t>r;r++)i[r]=e.call(n,r);return i},j.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var A={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};A.unescape=j.invert(A.escape);var F={escape:RegExp("["+j.keys(A.escape).join("")+"]","g"),unescape:RegExp("("+j.keys(A.unescape).join("|")+")","g")};j.each(["escape","unescape"],function(t){j[t]=function(e){return null==e?"":(""+e).replace(F[t],function(e){return A[t][e]})}}),j.result=function(t,e){if(null==t)return null;var n=t[e];return j.isFunction(n)?n.call(t):n},j.mixin=function(t){E(j.functions(t),function(e){var n=j[e]=t[e];j.prototype[e]=function(){var t=[this._wrapped];return o.apply(t,arguments),S.call(this,n.apply(j,t))}})};var T=0;j.uniqueId=function(t){var e=++T+"";return t?t+e:e},j.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var R=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},I=/\\|'|\r|\n|\t|\u2028|\u2029/g;j.template=function(t,e,n){var i;n=j.defaults({},n,j.templateSettings);var r=RegExp([(n.escape||R).source,(n.interpolate||R).source,(n.evaluate||R).source].join("|")+"|$","g"),s=0,o="__p+='";t.replace(r,function(e,n,i,r,a){return o+=t.slice(s,a).replace(I,function(t){return"\\"+H[t]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(o+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(o+="';\n"+r+"\n__p+='"),s=a+e.length,e}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{i=Function(n.variable||"obj","_",o)}catch(a){throw a.source=o,a}if(e)return i(e,j);var u=function(t){return i.call(this,t,j)};return u.source="function("+(n.variable||"obj")+"){\n"+o+"}",u},j.chain=function(t){return j(t).chain()};var S=function(t){return this._chain?j(t).chain():t};j.mixin(j),E(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];j.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],S.call(this,n)}}),E(["concat","join","slice"],function(t){var e=i[t];j.prototype[t]=function(){return S.call(this,e.apply(this._wrapped,arguments))}}),j.extend(j.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),i("underscore",[],function(){}),i("ventus/wm/modes/expose",["underscore","ventus/core/promise"],function(t,e){"use strict";var n={register:function(){var e=this;console.log("Expose mode registered."),this.el.on("contextmenu",t.throttle(function(){return"expose"!==e.mode?e.windows.length>0&&(e.mode="expose"):"expose"===e.mode&&(e.mode="default"),!1},1e3))},plug:function(){var t,e,n,i,r=Math.floor,s=Math.ceil,o=this,a=s(this.windows.length/2),u=r(this.el.width()/a),c=r(this.el.height()/2);this.el.addClass("expose");for(var l,h=0,f=this.windows.length;f>h;h++){l=this.windows[h],l.stamp(),t=l.height>l.width?l.height>c?c/l.height:1:l.width>u?u/l.width:1,t-=.15,i={x:h%a*u,y:(a>h?0:1)*c},e=i.x+r((u-t*l.width)/2),n=i.y+r((c-t*l.height)/2),l.enabled=!1,l.movable=!1,l.el.addClass("exposing"),l.el.css("transform-origin","0 0"),l.el.css("transform","scale("+t+")"),l.el.css("top",n),l.el.css("left",e);var d=function(){l.el.removeClass("exposing")};l.animations?l.el.onTransitionEnd(d,this):d.call(this)}this.overlay=!0,this.el.one("click",function(){o.mode="default"})},unplug:function(){var t=new e;t.getFuture().then(function(){this.el.removeClass("expose")}.bind(this)),0===this.windows.length&&t.done();for(var n,i=this.windows.length;i--;){n=this.windows[i],n.restore(),n.el.css("transform","scale(1)"),n.el.css("transform-origin","50% 50%");var r=function(e,n){return function(){0===n&&t.done(),e.el.css("transform","")}}(n,i);n.animations?this.el.onTransitionEnd(r,this):r.call(this),n.movable=!0,n.enabled=!0}this.overlay=!1},actions:{focus:function(){},close:function(){this.mode="expose"},select:function(t){this.mode="default",t.focus()}}};return n}),i("ventus/wm/modes/fullscreen",[],function(){"use strict";var t={register:function(){console.log("Fullscreen mode registered.")},plug:function(){this.el.addClass("fullscreen");for(var t,e=0,n=this.windows.length;n>e;e++)t=this.windows[e],t.move(0,0),t.el.css("-webkit-transform","translate3d(0, 0, 0);"),t.resize(this.el.width(),this.el.height())},unplug:function(){for(var t,e=this.windows.length;e--;){t=this.windows[e],t.restore(),t.el.css("transform","scale(1)"),t.el.css("transform-origin","50% 50%");var n=function(t){return function(){this.el.removeClass("fullscreen"),t.el.css("transform","")}}(t);this.el.onTransitionEnd(n,this),t.movable=!0,t.resizable=!0,t.enabled=!0}this.overlay=!1},actions:{focus:function(){},close:function(){this.mode="expose"},select:function(t){this.mode="default",t.focus()}}};return t}),i("ventus/wm/windowmanager",["$","ventus/wm/window","ventus/core/view","ventus/wm/modes/default","ventus/wm/modes/expose","ventus/wm/modes/fullscreen"],function(t,e,n,i,r,s){"use strict";var o=function(){var e;this.el=n('<div class="wm-space"><div class="wm-overlay" /></div>'),t(document.body).prepend(this.el),this.$overlay=this.el.find(".wm-overlay"),this.$overlay.css("z-index",this._baseZ-1),this.actions.forEach(function(t){this[t]=function(t){return function(){this.currentMode.actions[t]&&this.currentMode.actions[t].apply(this,arguments)}}.call(this,t)},this);for(var i in this.modes)this.modes.hasOwnProperty(i)&&this.modes[i].register&&this.modes[i].register.apply(this);this.windows=[],this.active=null,this.mode="default",e=this.createWindow,this.createWindow=e.bind(this),this.createWindow.fromQuery=e.fromQuery.bind(this),this.createWindow.fromElement=e.fromElement.bind(this)};return o.prototype={actions:["focus","blur","close","maximize","minimize","restore","select"],modes:{"default":i,expose:r,fullscreen:s},set mode(t){var e=this.modes[t];e&&this._mode!==t&&(this._mode&&this.currentMode.unplug&&this.currentMode.unplug.apply(this),e.plug&&e.plug.apply(this),this._mode=t)},get mode(){return this._mode},get currentMode(){return this.modes[this._mode]},set overlay(t){this.$overlay.css("opacity",t?.8:0),this._overlay=t},get overlay(){return this._overlay},createWindow:function(t){var n=new e(t);return this.mode="default",n.signals.on("focus",this._focus,this),n.signals.on("blur",this._blur,this),n.signals.on("close",this._close,this),this.actions.forEach(function(t){n.signals.on(t,this[t],this)},this),this.windows.push(n),n.space=this.el,n.focus(),n},_focus:function(t){var e,n,i=1e4,r=i+1e4;if(!this.active||this.active!==t){if(this.active?(e=this.active.z,this.active.blur()):e=i,n=this.windows.indexOf(t),this.windows.splice(n,1),this.windows.push(t),t.z=e+1,e>r+this.windows.length)for(var s,o=this.windows.length;o--;)s=this.windows[o].z,this.windows[o].z=i+(s-r);this.active=t}},_blur:function(t){this.active===t&&(this.active=null)},_close:function(t){var e,n=this.windows.indexOf(t);return-1===n?void console.log("Trying to close a window that doesn't exist in this window manager"):(this.windows.splice(n,1),e=this.windows.length,void(this.active&&this.active===t&&(this.active=0!==e?this.windows[e-1]:null,this.active&&this.active.focus())))}},o.prototype.createWindow.fromQuery=function(t,e){return e.content=n(t),this.createWindow(e)},o.prototype.createWindow.fromElement=function(t,e){return e.content=n(t),this.createWindow(e)},o}),i("ventus",["require","exports","module","ventus/wm/windowmanager","ventus/wm/window"],function(t){"use strict";return{version:"0.2",browser:{animationEventName:function(){var t=document.body.style,e=null;return""===t.animation?e="animationend":""===t.MozAnimation?e="mozAnimationEnd":""===t.webkitAnimation&&(e="webkitAnimationEnd"),e}},WindowManager:t("ventus/wm/windowmanager"),Window:t("ventus/wm/window")}}),i("src/main",["almond","handlebars","ventus"],function(){}),i("$",function(){return t}),i("underscore",function(){return _}),n("ventus")});